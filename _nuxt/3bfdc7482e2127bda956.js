(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{248:function(e,t){const n={render:function(){this.$createElement;return this._self._c,this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"frontmatter-markdown"},[n("h1",[e._v("Phoenix/Elixir stuffs")]),e._v(" "),n("h2",[e._v("Test only")]),e._v(" "),n("p",[e._v('If you want to run only one or few test cases we can "tag" each of them and will execute only the tagged ones. Using the following command:')]),e._v(" "),n("pre",[n("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("$ mix test --only only\n")])]),e._v(" "),n("p",[e._v("where "),n("code",{pre:!0},[e._v("only")]),e._v(" is a the tag name, will execute every test that has:")]),e._v(" "),n("pre",[n("code",{pre:!0,attrs:{class:"language-elixir"}},[e._v("@tag :only\n")])]),e._v(" "),n("p",[e._v("before the start of the test.")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://stackoverflow.com/questions/21878409/in-elixirs-exunit-is-it-possible-to-just-run-one-test"}},[e._v("https://stackoverflow.com/questions/21878409/in-elixirs-exunit-is-it-possible-to-just-run-one-test")])])]),e._v(" "),n("h2",[e._v("Mix alias")]),e._v(" "),n("p",[e._v("I'm fluent in JavaScript and my main tool is npm, so mix is basically the npm for elixir. So in JavaScript I'm used to run custom scripts with npm like this:")]),e._v(" "),n("pre",[n("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("$ npm run test-w\n")])]),e._v(" "),n("p",[e._v("We can do the same in elixir/phoenix using mix, in the "),n("code",{pre:!0},[e._v("mix.exs")]),e._v(" file we can define project aliases:")]),e._v(" "),n("pre",[n("code",{pre:!0,attrs:{class:"language-elixir"}},[e._v('def project do\n  [\n    aliases: aliases()\n  ]\nend\n\ndefp aliases do\n  [\n    test_only: ["cmd mix test --only only"]\n  ]\nend\n')])]),e._v(" "),n("p",[e._v("You can concat the commands you want in the array of the right side ("),n("code",{pre:!0},[e._v('["cmd mix test --only only"]')]),e._v(") next to the name of the alias ("),n("code",{pre:!0},[e._v("test_only")]),e._v("). One important thing here is that if you want to run command with mix first you need to include the "),n("code",{pre:!0},[e._v("cmd")]),e._v(" word.")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://elixirschool.com/blog/til-umbrella-app-child-app-tests/"}},[e._v("https://elixirschool.com/blog/til-umbrella-app-child-app-tests/")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://hexdocs.pm/mix/1.12/Mix.html"}},[e._v("https://hexdocs.pm/mix/1.12/Mix.html")])])]),e._v(" "),n("h2",[e._v("VSCode ElixirLS config formatter")]),e._v(" "),n("p",[e._v('If you\'re using vscode when coding elixir and you want to get the most value from your editor, first thing to install is the extension called "ElixirLS". If you have a formatter setup for your project best thing to do is configure that you code will be format every time your file is saved in your vscode settings.json file:')]),e._v(" "),n("pre",[n("code",{pre:!0,attrs:{class:"language-json"}},[e._v('{\n  // only for elixir code\n  "[elixir]": {\n      "editor.defaultFormatter": "JakeBecker.elixir-ls",\n      "editor.formatOnSave": true\n    }\n}\n')])]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/elixir-lsp/elixir-ls"}},[e._v("https://github.com/elixir-lsp/elixir-ls")])])]),e._v(" "),n("h2",[e._v("Migrations")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://stackoverflow.com/questions/48494655/how-to-add-field-in-existing-table-phoenix"}},[e._v("Add new column")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://devhints.io/phoenix-migrations"}},[e._v("Cheatsheet")])])]),e._v(" "),n("h3",[e._v("Add indexes")]),e._v(" "),n("pre",[n("code",{pre:!0,attrs:{class:"language-elixir"}},[e._v("defmodule Project.Repo.Migrations.AddIndex do\n  use Ecto.Migration\n\n  def change do\n    create index(:movements, [:account_id, :another_field])\n  end\nend\n")])]),e._v(" "),n("h2",[e._v("Enums")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://inquisitivedeveloper.com/lwm-elixir-36/"}},[e._v("Enums - basically sort")])])]),e._v(" "),n("pre",[n("code",{pre:!0,attrs:{class:"language-elixir"}},[e._v('  Enum.sort_by(list, & &1["property"]) # asc by default\n')])]),e._v(" "),n("h2",[e._v("Locking DB with Ecto")]),e._v(" "),n("p",[e._v("Sometimes race conditions happens -> "),n("a",{attrs:{href:"https://medium.com/@bruteforcecat/database-lock-in-elixir-why-and-how-and-the-alternative-in-elixir-6e0581156ee3"}},[e._v("differents ways to solve them")])]),e._v(" "),n("h1",[e._v("Ecto connection errors")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://blog.tap349.com/elixir/ecto/2018/12/28/ecto-troubleshooting/"}},[e._v("List of several commons errors and how to solve")])])])])}]};e.exports={attributes:{title:"Phoenix/Elixir stuffs",url:"elixir-stuffs",keywords:["elixir","phoenix"],status:"draft",visibility:"show"},meta:{resourcePath:"/home/fack/Documentos/Proyectos/personal-website/garden/elixir-stuffs.md"},vue:{component:{data:function(){return{templateRender:null}},render:function(e){return this.templateRender?this.templateRender():e("div","Rendering")},created:function(){this.templateRender=n.render,this.$options.staticRenderFns=n.staticRenderFns}}}}}}]);